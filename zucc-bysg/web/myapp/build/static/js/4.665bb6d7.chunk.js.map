{"version":3,"sources":["components/ui/Wysiwyg.tsx"],"names":["rawContentState","entityMap","type","mutability","data","src","height","width","blocks","key","text","depth","inlineStyleRanges","entityRanges","offset","length","Wysiwyg","state","editorContent","undefined","contentState","editorState","onEditorChange","setState","clearContent","onContentStateChange","console","log","onEditorStateChange","imageUploadCallBack","file","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","FormData","append","send","addEventListener","response","JSON","parse","responseText","error","this","className","first","second","gutter","md","title","bordered","toolbarClassName","wrapperClassName","editorClassName","toolbar","history","inDropdown","inline","list","textAlign","image","uploadCallback","placeholder","spellCheck","onFocus","onBlur","onTab","localization","locale","translations","mention","separator","trigger","caseSensitive","suggestions","value","url","draftToHtml","style","whiteSpace","draftToMarkdown","stringify","Component"],"mappings":"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","file":"static/js/4.665bb6d7.chunk.js","sourcesContent":["/**\r\n * Created by hao.cheng on 2017/4/26.\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Row, Col, Card } from 'antd';\r\nimport BreadcrumbCustom from '../BreadcrumbCustom';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport draftToMarkdown from 'draftjs-to-markdown';\r\nimport { EditorState } from 'draft-js';\r\n\r\nconst rawContentState = {\r\n    entityMap: {\r\n        '0': {\r\n            type: 'IMAGE',\r\n            mutability: 'MUTABLE',\r\n            data: { src: 'http://i.imgur.com/aMtBIep.png', height: 'auto', width: '100%' },\r\n        },\r\n    },\r\n    blocks: [\r\n        {\r\n            key: '9unl6',\r\n            text: '',\r\n            type: 'unstyled',\r\n            depth: 0,\r\n            inlineStyleRanges: [],\r\n            entityRanges: [],\r\n            data: {},\r\n        },\r\n        {\r\n            key: '95kn',\r\n            text: ' ',\r\n            type: 'atomic',\r\n            depth: 0,\r\n            inlineStyleRanges: [],\r\n            entityRanges: [{ offset: 0, length: 1, key: 0 }],\r\n            data: {},\r\n        },\r\n        {\r\n            key: '7rjes',\r\n            text: '',\r\n            type: 'unstyled',\r\n            depth: 0,\r\n            inlineStyleRanges: [],\r\n            entityRanges: [],\r\n            data: {},\r\n        },\r\n    ],\r\n};\r\ntype WysiwygState = {\r\n    editorContent: any;\r\n    contentState: any;\r\n    editorState: EditorState | undefined;\r\n};\r\nclass Wysiwyg extends Component {\r\n    state: WysiwygState = {\r\n        editorContent: undefined,\r\n        contentState: rawContentState,\r\n        editorState: undefined,\r\n    };\r\n\r\n    onEditorChange = (editorContent: any) => {\r\n        this.setState({\r\n            editorContent,\r\n        });\r\n    };\r\n\r\n    clearContent = () => {\r\n        this.setState({\r\n            contentState: '',\r\n        });\r\n    };\r\n\r\n    onContentStateChange = (contentState: any) => {\r\n        console.log('contentState', contentState);\r\n    };\r\n\r\n    onEditorStateChange = (editorState: any) => {\r\n        this.setState({\r\n            editorState,\r\n        });\r\n    };\r\n\r\n    imageUploadCallBack = (file: any) =>\r\n        new Promise((resolve, reject) => {\r\n            const xhr = new XMLHttpRequest(); // eslint-disable-line no-undef\r\n            xhr.open('POST', 'https://api.imgur.com/3/image');\r\n            xhr.setRequestHeader('Authorization', 'Client-ID 8d26ccd12712fca');\r\n            const data = new FormData(); // eslint-disable-line no-undef\r\n            data.append('image', file);\r\n            xhr.send(data);\r\n            xhr.addEventListener('load', () => {\r\n                const response = JSON.parse(xhr.responseText);\r\n                resolve(response);\r\n            });\r\n            xhr.addEventListener('error', () => {\r\n                const error = JSON.parse(xhr.responseText);\r\n                reject(error);\r\n            });\r\n        });\r\n\r\n    render() {\r\n        const { editorContent, editorState } = this.state;\r\n        return (\r\n            <div className=\"gutter-example button-demo\">\r\n                <BreadcrumbCustom first=\"UI\" second=\"富文本\" />\r\n                <Row gutter={16}>\r\n                    <Col className=\"gutter-row\" md={24}>\r\n                        <div className=\"gutter-box\">\r\n                            <Card title=\"富文本编辑器\" bordered={false}>\r\n                                <Editor\r\n                                    editorState={editorState}\r\n                                    toolbarClassName=\"home-toolbar\"\r\n                                    wrapperClassName=\"home-wrapper\"\r\n                                    editorClassName=\"home-editor\"\r\n                                    onEditorStateChange={this.onEditorStateChange}\r\n                                    toolbar={{\r\n                                        history: { inDropdown: true },\r\n                                        inline: { inDropdown: false },\r\n                                        list: { inDropdown: true },\r\n                                        textAlign: { inDropdown: true },\r\n                                        image: { uploadCallback: this.imageUploadCallBack },\r\n                                    }}\r\n                                    onContentStateChange={this.onEditorChange}\r\n                                    placeholder=\"请输入正文~~尝试@哦，有惊喜\"\r\n                                    spellCheck\r\n                                    onFocus={() => {\r\n                                        console.log('focus');\r\n                                    }}\r\n                                    onBlur={() => {\r\n                                        console.log('blur');\r\n                                    }}\r\n                                    onTab={() => {\r\n                                        console.log('tab');\r\n                                        return true;\r\n                                    }}\r\n                                    localization={{\r\n                                        locale: 'zh',\r\n                                        translations: { 'generic.add': 'Test-Add' },\r\n                                    }}\r\n                                    mention={{\r\n                                        separator: ' ',\r\n                                        trigger: '@',\r\n                                        caseSensitive: true,\r\n                                        suggestions: [\r\n                                            { text: 'A', value: 'AB', url: 'href-a' },\r\n                                            { text: 'AB', value: 'ABC', url: 'href-ab' },\r\n                                            { text: 'ABC', value: 'ABCD', url: 'href-abc' },\r\n                                            { text: 'ABCD', value: 'ABCDDDD', url: 'href-abcd' },\r\n                                            { text: 'ABCDE', value: 'ABCDE', url: 'href-abcde' },\r\n                                            { text: 'ABCDEF', value: 'ABCDEF', url: 'href-abcdef' },\r\n                                            {\r\n                                                text: 'ABCDEFG',\r\n                                                value: 'ABCDEFG',\r\n                                                url: 'href-abcdefg',\r\n                                            },\r\n                                        ],\r\n                                    }}\r\n                                />\r\n\r\n                                <style>{`\r\n                                    .home-editor {\r\n                                        min-height: 300px;\r\n                                    }\r\n                                `}</style>\r\n                            </Card>\r\n                        </div>\r\n                    </Col>\r\n                    <Col className=\"gutter-row\" md={8}>\r\n                        <Card title=\"同步转换HTML\" bordered={false}>\r\n                            <pre>{draftToHtml(editorContent)}</pre>\r\n                        </Card>\r\n                    </Col>\r\n                    <Col className=\"gutter-row\" md={8}>\r\n                        <Card title=\"同步转换MarkDown\" bordered={false}>\r\n                            <pre style={{ whiteSpace: 'pre-wrap' }}>\r\n                                {draftToMarkdown(editorContent)}\r\n                            </pre>\r\n                        </Card>\r\n                    </Col>\r\n                    <Col className=\"gutter-row\" md={8}>\r\n                        <Card title=\"同步转换JSON\" bordered={false}>\r\n                            <pre style={{ whiteSpace: 'normal' }}>\r\n                                {JSON.stringify(editorContent)}\r\n                            </pre>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Wysiwyg;\r\n"],"sourceRoot":""}