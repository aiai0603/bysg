{"ast":null,"code":"import \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nvar _jsxFileName = \"C:\\\\Users\\\\asus\\\\Desktop\\\\zucc-bysg\\\\web\\\\myapp\\\\src\\\\components\\\\ui\\\\Wysiwyg.tsx\";\n\n/**\r\n * Created by hao.cheng on 2017/4/26.\r\n */\nimport React, { Component } from 'react';\nimport BreadcrumbCustom from '../BreadcrumbCustom';\nimport { Editor } from 'react-draft-wysiwyg';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport draftToHtml from 'draftjs-to-html';\nimport draftToMarkdown from 'draftjs-to-markdown';\nconst rawContentState = {\n  entityMap: {\n    '0': {\n      type: 'IMAGE',\n      mutability: 'MUTABLE',\n      data: {\n        src: 'http://i.imgur.com/aMtBIep.png',\n        height: 'auto',\n        width: '100%'\n      }\n    }\n  },\n  blocks: [{\n    key: '9unl6',\n    text: '',\n    type: 'unstyled',\n    depth: 0,\n    inlineStyleRanges: [],\n    entityRanges: [],\n    data: {}\n  }, {\n    key: '95kn',\n    text: ' ',\n    type: 'atomic',\n    depth: 0,\n    inlineStyleRanges: [],\n    entityRanges: [{\n      offset: 0,\n      length: 1,\n      key: 0\n    }],\n    data: {}\n  }, {\n    key: '7rjes',\n    text: '',\n    type: 'unstyled',\n    depth: 0,\n    inlineStyleRanges: [],\n    entityRanges: [],\n    data: {}\n  }]\n};\n\nclass Wysiwyg extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      editorContent: undefined,\n      contentState: rawContentState,\n      editorState: undefined\n    };\n\n    this.onEditorChange = editorContent => {\n      this.setState({\n        editorContent\n      });\n    };\n\n    this.clearContent = () => {\n      this.setState({\n        contentState: ''\n      });\n    };\n\n    this.onContentStateChange = contentState => {\n      console.log('contentState', contentState);\n    };\n\n    this.onEditorStateChange = editorState => {\n      this.setState({\n        editorState\n      });\n    };\n\n    this.imageUploadCallBack = file => new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest(); // eslint-disable-line no-undef\n\n      xhr.open('POST', 'https://api.imgur.com/3/image');\n      xhr.setRequestHeader('Authorization', 'Client-ID 8d26ccd12712fca');\n      const data = new FormData(); // eslint-disable-line no-undef\n\n      data.append('image', file);\n      xhr.send(data);\n      xhr.addEventListener('load', () => {\n        const response = JSON.parse(xhr.responseText);\n        resolve(response);\n      });\n      xhr.addEventListener('error', () => {\n        const error = JSON.parse(xhr.responseText);\n        reject(error);\n      });\n    });\n  }\n\n  render() {\n    const {\n      editorContent,\n      editorState\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gutter-example button-demo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(BreadcrumbCustom, {\n      first: \"UI\",\n      second: \"\\u5BCC\\u6587\\u672C\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(_Row, {\n      gutter: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Col, {\n      className: \"gutter-row\",\n      md: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gutter-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      title: \"\\u5BCC\\u6587\\u672C\\u7F16\\u8F91\\u5668\",\n      bordered: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Editor, {\n      editorState: editorState,\n      toolbarClassName: \"home-toolbar\",\n      wrapperClassName: \"home-wrapper\",\n      editorClassName: \"home-editor\",\n      onEditorStateChange: this.onEditorStateChange,\n      toolbar: {\n        history: {\n          inDropdown: true\n        },\n        inline: {\n          inDropdown: false\n        },\n        list: {\n          inDropdown: true\n        },\n        textAlign: {\n          inDropdown: true\n        },\n        image: {\n          uploadCallback: this.imageUploadCallBack\n        }\n      },\n      onContentStateChange: this.onEditorChange,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u6B63\\u6587~~\\u5C1D\\u8BD5@\\u54E6\\uFF0C\\u6709\\u60CA\\u559C\",\n      spellCheck: true,\n      onFocus: () => {\n        console.log('focus');\n      },\n      onBlur: () => {\n        console.log('blur');\n      },\n      onTab: () => {\n        console.log('tab');\n        return true;\n      },\n      localization: {\n        locale: 'zh',\n        translations: {\n          'generic.add': 'Test-Add'\n        }\n      },\n      mention: {\n        separator: ' ',\n        trigger: '@',\n        caseSensitive: true,\n        suggestions: [{\n          text: 'A',\n          value: 'AB',\n          url: 'href-a'\n        }, {\n          text: 'AB',\n          value: 'ABC',\n          url: 'href-ab'\n        }, {\n          text: 'ABC',\n          value: 'ABCD',\n          url: 'href-abc'\n        }, {\n          text: 'ABCD',\n          value: 'ABCDDDD',\n          url: 'href-abcd'\n        }, {\n          text: 'ABCDE',\n          value: 'ABCDE',\n          url: 'href-abcde'\n        }, {\n          text: 'ABCDEF',\n          value: 'ABCDEF',\n          url: 'href-abcdef'\n        }, {\n          text: 'ABCDEFG',\n          value: 'ABCDEFG',\n          url: 'href-abcdefg'\n        }]\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"style\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 33\n      }\n    }, `\n                                    .home-editor {\n                                        min-height: 300px;\n                                    }\n                                `)))), /*#__PURE__*/React.createElement(_Col, {\n      className: \"gutter-row\",\n      md: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      title: \"\\u540C\\u6B65\\u8F6C\\u6362HTML\",\n      bordered: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"pre\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 29\n      }\n    }, draftToHtml(editorContent)))), /*#__PURE__*/React.createElement(_Col, {\n      className: \"gutter-row\",\n      md: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      title: \"\\u540C\\u6B65\\u8F6C\\u6362MarkDown\",\n      bordered: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"pre\", {\n      style: {\n        whiteSpace: 'pre-wrap'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 29\n      }\n    }, draftToMarkdown(editorContent)))), /*#__PURE__*/React.createElement(_Col, {\n      className: \"gutter-row\",\n      md: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      title: \"\\u540C\\u6B65\\u8F6C\\u6362JSON\",\n      bordered: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"pre\", {\n      style: {\n        whiteSpace: 'normal'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 29\n      }\n    }, JSON.stringify(editorContent))))));\n  }\n\n}\n\nexport default Wysiwyg;","map":{"version":3,"sources":["C:/Users/asus/Desktop/zucc-bysg/web/myapp/src/components/ui/Wysiwyg.tsx"],"names":["React","Component","BreadcrumbCustom","Editor","draftToHtml","draftToMarkdown","rawContentState","entityMap","type","mutability","data","src","height","width","blocks","key","text","depth","inlineStyleRanges","entityRanges","offset","length","Wysiwyg","state","editorContent","undefined","contentState","editorState","onEditorChange","setState","clearContent","onContentStateChange","console","log","onEditorStateChange","imageUploadCallBack","file","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","FormData","append","send","addEventListener","response","JSON","parse","responseText","error","render","history","inDropdown","inline","list","textAlign","image","uploadCallback","locale","translations","separator","trigger","caseSensitive","suggestions","value","url","whiteSpace","stringify"],"mappings":"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","sourcesContent":["/**\r\n * Created by hao.cheng on 2017/4/26.\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Row, Col, Card } from 'antd';\r\nimport BreadcrumbCustom from '../BreadcrumbCustom';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport draftToMarkdown from 'draftjs-to-markdown';\r\nimport { EditorState } from 'draft-js';\r\n\r\nconst rawContentState = {\r\n    entityMap: {\r\n        '0': {\r\n            type: 'IMAGE',\r\n            mutability: 'MUTABLE',\r\n            data: { src: 'http://i.imgur.com/aMtBIep.png', height: 'auto', width: '100%' },\r\n        },\r\n    },\r\n    blocks: [\r\n        {\r\n            key: '9unl6',\r\n            text: '',\r\n            type: 'unstyled',\r\n            depth: 0,\r\n            inlineStyleRanges: [],\r\n            entityRanges: [],\r\n            data: {},\r\n        },\r\n        {\r\n            key: '95kn',\r\n            text: ' ',\r\n            type: 'atomic',\r\n            depth: 0,\r\n            inlineStyleRanges: [],\r\n            entityRanges: [{ offset: 0, length: 1, key: 0 }],\r\n            data: {},\r\n        },\r\n        {\r\n            key: '7rjes',\r\n            text: '',\r\n            type: 'unstyled',\r\n            depth: 0,\r\n            inlineStyleRanges: [],\r\n            entityRanges: [],\r\n            data: {},\r\n        },\r\n    ],\r\n};\r\ntype WysiwygState = {\r\n    editorContent: any;\r\n    contentState: any;\r\n    editorState: EditorState | undefined;\r\n};\r\nclass Wysiwyg extends Component {\r\n    state: WysiwygState = {\r\n        editorContent: undefined,\r\n        contentState: rawContentState,\r\n        editorState: undefined,\r\n    };\r\n\r\n    onEditorChange = (editorContent: any) => {\r\n        this.setState({\r\n            editorContent,\r\n        });\r\n    };\r\n\r\n    clearContent = () => {\r\n        this.setState({\r\n            contentState: '',\r\n        });\r\n    };\r\n\r\n    onContentStateChange = (contentState: any) => {\r\n        console.log('contentState', contentState);\r\n    };\r\n\r\n    onEditorStateChange = (editorState: any) => {\r\n        this.setState({\r\n            editorState,\r\n        });\r\n    };\r\n\r\n    imageUploadCallBack = (file: any) =>\r\n        new Promise((resolve, reject) => {\r\n            const xhr = new XMLHttpRequest(); // eslint-disable-line no-undef\r\n            xhr.open('POST', 'https://api.imgur.com/3/image');\r\n            xhr.setRequestHeader('Authorization', 'Client-ID 8d26ccd12712fca');\r\n            const data = new FormData(); // eslint-disable-line no-undef\r\n            data.append('image', file);\r\n            xhr.send(data);\r\n            xhr.addEventListener('load', () => {\r\n                const response = JSON.parse(xhr.responseText);\r\n                resolve(response);\r\n            });\r\n            xhr.addEventListener('error', () => {\r\n                const error = JSON.parse(xhr.responseText);\r\n                reject(error);\r\n            });\r\n        });\r\n\r\n    render() {\r\n        const { editorContent, editorState } = this.state;\r\n        return (\r\n            <div className=\"gutter-example button-demo\">\r\n                <BreadcrumbCustom first=\"UI\" second=\"富文本\" />\r\n                <Row gutter={16}>\r\n                    <Col className=\"gutter-row\" md={24}>\r\n                        <div className=\"gutter-box\">\r\n                            <Card title=\"富文本编辑器\" bordered={false}>\r\n                                <Editor\r\n                                    editorState={editorState}\r\n                                    toolbarClassName=\"home-toolbar\"\r\n                                    wrapperClassName=\"home-wrapper\"\r\n                                    editorClassName=\"home-editor\"\r\n                                    onEditorStateChange={this.onEditorStateChange}\r\n                                    toolbar={{\r\n                                        history: { inDropdown: true },\r\n                                        inline: { inDropdown: false },\r\n                                        list: { inDropdown: true },\r\n                                        textAlign: { inDropdown: true },\r\n                                        image: { uploadCallback: this.imageUploadCallBack },\r\n                                    }}\r\n                                    onContentStateChange={this.onEditorChange}\r\n                                    placeholder=\"请输入正文~~尝试@哦，有惊喜\"\r\n                                    spellCheck\r\n                                    onFocus={() => {\r\n                                        console.log('focus');\r\n                                    }}\r\n                                    onBlur={() => {\r\n                                        console.log('blur');\r\n                                    }}\r\n                                    onTab={() => {\r\n                                        console.log('tab');\r\n                                        return true;\r\n                                    }}\r\n                                    localization={{\r\n                                        locale: 'zh',\r\n                                        translations: { 'generic.add': 'Test-Add' },\r\n                                    }}\r\n                                    mention={{\r\n                                        separator: ' ',\r\n                                        trigger: '@',\r\n                                        caseSensitive: true,\r\n                                        suggestions: [\r\n                                            { text: 'A', value: 'AB', url: 'href-a' },\r\n                                            { text: 'AB', value: 'ABC', url: 'href-ab' },\r\n                                            { text: 'ABC', value: 'ABCD', url: 'href-abc' },\r\n                                            { text: 'ABCD', value: 'ABCDDDD', url: 'href-abcd' },\r\n                                            { text: 'ABCDE', value: 'ABCDE', url: 'href-abcde' },\r\n                                            { text: 'ABCDEF', value: 'ABCDEF', url: 'href-abcdef' },\r\n                                            {\r\n                                                text: 'ABCDEFG',\r\n                                                value: 'ABCDEFG',\r\n                                                url: 'href-abcdefg',\r\n                                            },\r\n                                        ],\r\n                                    }}\r\n                                />\r\n\r\n                                <style>{`\r\n                                    .home-editor {\r\n                                        min-height: 300px;\r\n                                    }\r\n                                `}</style>\r\n                            </Card>\r\n                        </div>\r\n                    </Col>\r\n                    <Col className=\"gutter-row\" md={8}>\r\n                        <Card title=\"同步转换HTML\" bordered={false}>\r\n                            <pre>{draftToHtml(editorContent)}</pre>\r\n                        </Card>\r\n                    </Col>\r\n                    <Col className=\"gutter-row\" md={8}>\r\n                        <Card title=\"同步转换MarkDown\" bordered={false}>\r\n                            <pre style={{ whiteSpace: 'pre-wrap' }}>\r\n                                {draftToMarkdown(editorContent)}\r\n                            </pre>\r\n                        </Card>\r\n                    </Col>\r\n                    <Col className=\"gutter-row\" md={8}>\r\n                        <Card title=\"同步转换JSON\" bordered={false}>\r\n                            <pre style={{ whiteSpace: 'normal' }}>\r\n                                {JSON.stringify(editorContent)}\r\n                            </pre>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Wysiwyg;\r\n"]},"metadata":{},"sourceType":"module"}