{"ast":null,"code":"import \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/icon/style\";\nimport _Icon from \"antd/lib/icon\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/notification/style\";\nimport _notification from \"antd/lib/notification\";\nvar _jsxFileName = \"C:\\\\Users\\\\asus\\\\Desktop\\\\zucc-bysg\\\\web\\\\myapp\\\\src\\\\components\\\\tables\\\\AsynchronousTable.tsx\";\n\n/**\n * Created by hao.cheng on 2017/4/16.\n */\nimport React from 'react';\nimport BreadcrumbCustom from '../BreadcrumbCustom';\nimport { get } from '../../service/tools';\n\nclass AsynchronousTable extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedRowKeys: [],\n      // Check here to configure the default column\n      loading: false,\n      data: [],\n      filterDropdownVisible: false,\n      searchText: '',\n      filtered: false\n    };\n\n    this.handleChange = (pagination, filters, sorter) => {\n      console.log('Various parameters', pagination, filters, sorter);\n    };\n\n    this.start = () => {\n      this.setState({\n        loading: true\n      });\n      get({\n        url: 'http://localhost:8080/admin/findall'\n      }).then(res => {\n        if (!res) {\n          _notification.open({\n            message: '后台异常'\n          });\n\n          return 0;\n        }\n\n        if (res.rspCode !== '200') {\n          _notification.open({\n            message: res.rspMsg\n          });\n        } else {\n          this.setState({\n            data: res.data\n          });\n          this.setState({\n            loading: false\n          });\n        }\n      });\n    };\n\n    this.searchInput = void 0;\n\n    this.onInputChange = e => {\n      this.setState({\n        searchText: e.target.value\n      });\n    };\n\n    this.onSearchRest = () => {\n      const {\n        searchText\n      } = this.state; // const reg = new RegExp(searchText, 'gi');\n\n      this.setState({\n        filterDropdownVisible: false,\n        filtered: !!searchText,\n        data: this.state.data,\n        searchText: ''\n      });\n    };\n\n    this.onSearch = () => {\n      const {\n        searchText\n      } = this.state;\n      const reg = new RegExp(searchText, 'gi');\n      this.setState({\n        filterDropdownVisible: false,\n        filtered: !!searchText,\n        data: this.state.data.map(record => {\n          const match = record.adminId.match(reg);\n\n          if (!match) {\n            return null;\n          }\n\n          return { ...record,\n            name: /*#__PURE__*/React.createElement(\"span\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 29\n              }\n            }, record.adminId.split(reg).map((text, i) => i > 0 ? [/*#__PURE__*/React.createElement(\"span\", {\n              className: \"highlight\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 48\n              }\n            }, match[0]), text] : text))\n          };\n        }).filter(record => !!record)\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.start();\n  }\n\n  render() {\n    let {\n      loading,\n      selectedRowKeys\n    } = this.state;\n    const columns = [{\n      title: 'Id',\n      dataIndex: 'id',\n      key: 'id',\n      width: 40,\n      sorter: (a, b) => a.id - b.id\n    }, {\n      title: '账号',\n      dataIndex: 'adminId',\n      key: 'adminId',\n      width: 80,\n      filterDropdown: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-filter-dropdown\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        ref: ele => this.searchInput = ele,\n        placeholder: \"Search name\",\n        value: this.state.searchText,\n        onChange: this.onInputChange,\n        onPressEnter: this.onSearch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.onSearch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }\n      }, \"Search\"), /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        onClick: this.onSearchRest,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }\n      }, \"reset\")),\n      filterIcon: /*#__PURE__*/React.createElement(_Icon, {\n        type: \"smile-o\",\n        style: {\n          color: this.state.filtered ? '#108ee9' : '#aaa'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }\n      }),\n      filterDropdownVisible: this.state.filterDropdownVisible,\n      onFilterDropdownVisibleChange: visible => this.setState({\n        filterDropdownVisible: visible\n      }, () => this.searchInput.focus())\n    }, {\n      title: '等级',\n      dataIndex: 'role',\n      key: \"role\",\n      width: 80,\n      render: text => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 43\n        }\n      }, text === 2 ? '普通管理员' : '超级管理员')\n    }, {\n      title: '状态',\n      dataIndex: 'deleteFlag',\n      key: 'deleteFlag',\n      width: 80,\n      render: text => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 43\n        }\n      }, text === 0 ? '正常' : '封禁'),\n      filters: [{\n        text: '正常',\n        value: \"0\"\n      }, {\n        text: '封禁',\n        value: \"1\"\n      }],\n      onFilter: (value, record) => record.text === value\n    }, {\n      title: '创建时间',\n      dataIndex: 'createTime',\n      key: 'createTime',\n      width: 200\n    }];\n    const hasSelected = selectedRowKeys.length > 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gutter-example\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(BreadcrumbCustom, {\n      first: \"\\u8868\\u683C\",\n      second: \"\\u5F02\\u6B65\\u8868\\u683C\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(_Row, {\n      gutter: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Col, {\n      className: \"gutter-row\",\n      md: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gutter-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      title: \"\\u7BA1\\u7406\\u5458\\u7BA1\\u7406\",\n      bordered: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.start,\n      disabled: loading,\n      loading: loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 37\n      }\n    }, \"Reload\"), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        marginLeft: 8\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 37\n      }\n    }, hasSelected ? `Selected ${selectedRowKeys.length} items` : '')), /*#__PURE__*/React.createElement(_Table, {\n      columns: columns,\n      dataSource: this.state.data,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"style\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 33\n      }\n    }, `\n                                        .custom-filter-dropdown {\n                                            padding: 8px;\n                                            border-radius: 6px;\n                                            background: #fff;\n                                            box-shadow: 0 1px 6px rgba(0, 0, 0, .2);\n                                        }\n                                        .custom-filter-dropdown input {\n                                            width: 130px;\n                                            margin-right: 8px;\n                                        }\n                                        .highlight {\n                                            color: #f50;\n                                        }\n                                `))))));\n  }\n\n}\n\nexport default AsynchronousTable;","map":{"version":3,"sources":["C:/Users/asus/Desktop/zucc-bysg/web/myapp/src/components/tables/AsynchronousTable.tsx"],"names":["React","BreadcrumbCustom","get","AsynchronousTable","Component","state","selectedRowKeys","loading","data","filterDropdownVisible","searchText","filtered","handleChange","pagination","filters","sorter","console","log","start","setState","url","then","res","open","message","rspCode","rspMsg","searchInput","onInputChange","e","target","value","onSearchRest","onSearch","reg","RegExp","map","record","match","adminId","name","split","text","i","filter","componentDidMount","render","columns","title","dataIndex","key","width","a","b","id","filterDropdown","ele","filterIcon","color","onFilterDropdownVisibleChange","visible","focus","onFilter","hasSelected","length","marginBottom","marginLeft"],"mappings":"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","sourcesContent":["/**\n * Created by hao.cheng on 2017/4/16.\n */\nimport React from 'react';\nimport { Table, Button, Row, Col, Card, notification, Input, Icon } from 'antd';\nimport BreadcrumbCustom from '../BreadcrumbCustom';\nimport { get } from '../../service/tools';\n\n\n\nclass AsynchronousTable extends React.Component{\n\n    \n    state = {\n        selectedRowKeys: [], // Check here to configure the default column\n        loading: false,\n        data: [],\n        filterDropdownVisible: false,\n        searchText: '',\n        filtered: false,\n        \n    };\n    // eslint-disable-next-line react/sort-comp\n    handleChange = (pagination: any, filters: any, sorter: any) => {\n        console.log('Various parameters', pagination, filters, sorter);\n    };\n    \n  \n\n\n    componentDidMount() {\n        this.start();\n    }\n    start = () => {\n        this.setState({ loading: true });\n        get({\n            url: 'http://localhost:8080/admin/findall',\n        }).then((res) => {\n            if (!res) {\n                notification.open({\n                    message: '后台异常',\n                });\n                return 0;\n            }\n            if (res.rspCode !== '200') {\n                notification.open({\n                    message: res.rspMsg,\n                });\n            } else {\n                this.setState({\n                    data: res.data,\n                });\n                this.setState({ loading: false });\n            }\n        });\n    };\n    searchInput: any;\n    onInputChange = (e: any) => {\n        this.setState({ searchText: e.target.value });\n    };\n    onSearchRest = () => {\n        const { searchText } = this.state;\n       // const reg = new RegExp(searchText, 'gi');\n        this.setState({\n            filterDropdownVisible: false,\n            filtered: !!searchText,\n            data: this.state.data,\n            searchText: '',\n        });\n    }\n    onSearch = () => {\n        const { searchText } = this.state;\n        const reg = new RegExp(searchText, 'gi');\n        this.setState({\n            filterDropdownVisible: false,\n            filtered: !!searchText,\n            data: this.state.data\n                .map((record: any) => {\n                    const match = record.adminId.match(reg);\n                    if (!match) {\n                        return null;\n                    }\n                    return {\n                        ...record,\n                        name: (\n                            <span>\n                                {record.adminId\n                                    .split(reg)\n                                    .map((text: any, i: number) =>\n                                        i > 0\n                                            ? [<span className=\"highlight\">{match[0]}</span>, text]\n                                            : text\n                                    )}\n                            </span>\n                        ),\n                    };\n                })\n                .filter((record) => !!record),\n        });\n    };\n\n    render() {\n        let { loading, selectedRowKeys} = this.state;\n\n        const columns = [\n            {\n                title: 'Id',\n                dataIndex: 'id',\n                key: 'id',\n                width: 40,\n                sorter: (a: any, b: any) => a.id - b.id,\n               \n               \n            },\n            {\n                title: '账号',\n                dataIndex: 'adminId',\n                key: 'adminId',\n                width: 80,\n                filterDropdown: (\n                    <div className=\"custom-filter-dropdown\">\n                        <Input\n                            ref={(ele) => (this.searchInput = ele)}\n                            placeholder=\"Search name\"\n                            value={this.state.searchText}\n                            onChange={this.onInputChange}\n                            onPressEnter={this.onSearch}\n                        />\n                        <Button type=\"primary\" onClick={this.onSearch}>\n                            Search\n                        </Button>\n                        <Button type=\"primary\" onClick={this.onSearchRest}>\n                            reset\n                        </Button>\n                    </div>\n\n                ),\n                filterIcon: (\n                    <Icon\n                        type=\"smile-o\"\n                        style={{ color: this.state.filtered ? '#108ee9' : '#aaa' }}\n                    />\n                ),\n                filterDropdownVisible: this.state.filterDropdownVisible,\n                onFilterDropdownVisibleChange: (visible: boolean) =>\n                    this.setState({ filterDropdownVisible: visible }, () =>\n                        this.searchInput.focus()\n                    ),\n            },\n            {\n                title: '等级',\n                dataIndex: 'role',\n                key:\"role\",\n                width: 80,\n                render: (text: number) => <div>{text === 2 ? '普通管理员' : '超级管理员'}</div>,\n                \n            },\n            {\n                title: '状态',\n                dataIndex: 'deleteFlag',\n                key:'deleteFlag',\n                width: 80,\n                render: (text: number) => <div>{text === 0 ? '正常' : '封禁'}</div>,\n                filters: [\n                    {\n                      text: '正常',\n                      value: \"0\",\n                    },\n                    {\n                      text: '封禁',\n                      value: \"1\",\n                    },\n                  ],\n                onFilter: (value: any, record: any) => record.text === value,\n            },\n            {\n                title: '创建时间',\n                dataIndex: 'createTime',\n                key:'createTime',\n                width: 200,\n               \n            },\n        ];\n\n        const hasSelected = selectedRowKeys.length > 0;\n        return (\n            <div className=\"gutter-example\">\n                <BreadcrumbCustom first=\"表格\" second=\"异步表格\" />\n                <Row gutter={16}>\n                    <Col className=\"gutter-row\" md={24}>\n                        <div className=\"gutter-box\">\n                            <Card title=\"管理员管理\" bordered={false}>\n                                <div style={{ marginBottom: 16 }}>\n                                    <Button\n                                        type=\"primary\"\n                                        onClick={this.start}\n                                        disabled={loading}\n                                        loading={loading}\n                                    >\n                                        Reload\n                                    </Button>\n\n                                    <span style={{ marginLeft: 8 }}>\n                                        {hasSelected\n                                            ? `Selected ${selectedRowKeys.length} items`\n                                            : ''}\n                                    </span>\n                                </div>\n                                <Table columns={columns} dataSource={this.state.data} onChange={this.handleChange}/>\n                                <style>{`\n                                        .custom-filter-dropdown {\n                                            padding: 8px;\n                                            border-radius: 6px;\n                                            background: #fff;\n                                            box-shadow: 0 1px 6px rgba(0, 0, 0, .2);\n                                        }\n                                        .custom-filter-dropdown input {\n                                            width: 130px;\n                                            margin-right: 8px;\n                                        }\n                                        .highlight {\n                                            color: #f50;\n                                        }\n                                `}</style>\n                            </Card>\n                        </div>\n                    </Col>\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default AsynchronousTable;\n"]},"metadata":{},"sourceType":"module"}