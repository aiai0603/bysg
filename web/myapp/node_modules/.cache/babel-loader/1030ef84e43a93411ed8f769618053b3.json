{"ast":null,"code":"import \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\nvar _jsxFileName = \"C:\\\\Users\\\\asus\\\\Desktop\\\\zucc-bysg\\\\web\\\\myapp\\\\src\\\\components\\\\SiderCustom.tsx\";\n\n/**\r\n * Created by hao.cheng on 2017/4/13.\r\n */\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport routes from '../routes/config';\nimport SiderMenu from './SiderMenu';\nimport { connectAlita } from 'redux-alita';\nconst {\n  Sider\n} = _Layout;\n\nclass SiderCustom extends Component {\n  constructor(props) {\n    super(props);\n\n    this.recombineOpenKeys = openKeys => {\n      let i = 0;\n      let strPlus = '';\n      let tempKeys = [];\n\n      while (i < openKeys.length) {\n        strPlus += openKeys[i];\n        tempKeys.push(strPlus);\n        i++;\n      }\n\n      return tempKeys;\n    };\n\n    this.menuClick = e => {\n      this.setState({\n        selectedKey: e.key\n      });\n      const {\n        popoverHide\n      } = this.props; // 响应式布局控制小屏幕点击菜单时隐藏菜单操作\n\n      popoverHide && popoverHide();\n    };\n\n    this.openMenu = v => {\n      this.setState({\n        openKeys: v,\n        firstHide: false\n      });\n    };\n\n    this.state = {\n      mode: 'inline',\n      openKeys: [],\n      selectedKey: '',\n      firstHide: false // 点击收缩菜单，第一次隐藏展开子菜单，openMenu时恢复\n\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.collapsed !== this.state.collapsed) {\n      const {\n        collapsed\n      } = this.props;\n      this.setState({ ...this.getOpenAndSelectKeys(),\n        collapsed,\n        mode: collapsed ? 'vertical' : 'inline',\n        firstHide: collapsed\n      });\n    }\n\n    if (prevProps.location.pathname !== this.props.location.pathname) {\n      this.setState({ ...this.getOpenAndSelectKeys()\n      });\n    }\n  }\n\n  getOpenAndSelectKeys() {\n    const {\n      location\n    } = this.props;\n    const {\n      pathname\n    } = location;\n    return {\n      openKeys: this.recombineOpenKeys(pathname.match(/[/](\\w+)/gi) || []),\n      selectedKey: pathname\n    };\n  }\n\n  render() {\n    const {\n      selectedKey,\n      openKeys,\n      firstHide,\n      collapsed\n    } = this.state;\n    const {\n      smenus\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Sider, {\n      trigger: null,\n      breakpoint: \"lg\",\n      collapsed: collapsed,\n      style: {\n        overflowY: 'auto'\n      },\n      className: \"sider-custom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(SiderMenu, {\n      menus: [...routes.menus, ...smenus.data],\n      onClick: this.menuClick,\n      mode: \"inline\",\n      selectedKeys: [selectedKey],\n      openKeys: firstHide ? [] : openKeys,\n      onOpenChange: this.openMenu,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"style\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }, `\n                    #nprogress .spinner{\n                        left: ${collapsed ? '70px' : '206px'};\n                        right: 0 !important;\n                    }\n                    `));\n  }\n\n}\n\nexport default connectAlita([{\n  smenus: []\n}])(withRouter(SiderCustom));","map":{"version":3,"sources":["C:/Users/asus/Desktop/zucc-bysg/web/myapp/src/components/SiderCustom.tsx"],"names":["React","Component","withRouter","routes","SiderMenu","connectAlita","Sider","SiderCustom","constructor","props","recombineOpenKeys","openKeys","i","strPlus","tempKeys","length","push","menuClick","e","setState","selectedKey","key","popoverHide","openMenu","v","firstHide","state","mode","componentDidUpdate","prevProps","collapsed","getOpenAndSelectKeys","location","pathname","match","render","smenus","overflowY","menus","data"],"mappings":"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","sourcesContent":["/**\r\n * Created by hao.cheng on 2017/4/13.\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Layout } from 'antd';\r\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\r\nimport routes from '../routes/config';\r\nimport SiderMenu from './SiderMenu';\r\nimport { connectAlita } from 'redux-alita';\r\n\r\nconst { Sider } = Layout;\r\n\r\ntype SiderCustomProps = RouteComponentProps<any> & {\r\n    popoverHide?: () => void;\r\n    collapsed?: boolean;\r\n    smenus?: any;\r\n};\r\ntype SiderCustomState = {\r\n    collapsed?: boolean | undefined;\r\n    openKeys: string[];\r\n    firstHide: boolean | undefined;\r\n    selectedKey: string;\r\n    mode: string;\r\n};\r\n\r\nclass SiderCustom extends Component<SiderCustomProps, SiderCustomState> {\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            mode: 'inline',\r\n            openKeys: [],\r\n            selectedKey: '',\r\n            firstHide: false, // 点击收缩菜单，第一次隐藏展开子菜单，openMenu时恢复\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(prevProps: SiderCustomProps) {\r\n        if (this.props.collapsed !== this.state.collapsed) {\r\n            const { collapsed } = this.props;\r\n            this.setState({\r\n                ...this.getOpenAndSelectKeys(),\r\n                collapsed,\r\n                mode: collapsed ? 'vertical' : 'inline',\r\n                firstHide: collapsed,\r\n            });\r\n        }\r\n        if (prevProps.location.pathname !== this.props.location.pathname) {\r\n            this.setState({ ...this.getOpenAndSelectKeys() });\r\n        }\r\n    }\r\n\r\n    getOpenAndSelectKeys() {\r\n        const { location } = this.props;\r\n        const { pathname } = location;\r\n        return {\r\n            openKeys: this.recombineOpenKeys(pathname.match(/[/](\\w+)/gi) || []),\r\n            selectedKey: pathname,\r\n        };\r\n    }\r\n\r\n    recombineOpenKeys = (openKeys: string[]) => {\r\n        let i = 0;\r\n        let strPlus = '';\r\n        let tempKeys: string[] = [];\r\n        while (i < openKeys.length) {\r\n            strPlus += openKeys[i];\r\n            tempKeys.push(strPlus);\r\n            i++;\r\n        }\r\n        return tempKeys;\r\n    };\r\n\r\n    menuClick = (e: any) => {\r\n        this.setState({\r\n            selectedKey: e.key,\r\n        });\r\n        const { popoverHide } = this.props; // 响应式布局控制小屏幕点击菜单时隐藏菜单操作\r\n        popoverHide && popoverHide();\r\n    };\r\n    openMenu = (v: string[]) => {\r\n        this.setState({\r\n            openKeys: v,\r\n            firstHide: false,\r\n        });\r\n    };\r\n    render() {\r\n        const { selectedKey, openKeys, firstHide, collapsed } = this.state;\r\n        const { smenus } = this.props;\r\n        return (\r\n            <Sider\r\n                trigger={null}\r\n                breakpoint=\"lg\"\r\n                collapsed={collapsed}\r\n                style={{ overflowY: 'auto' }}\r\n                className=\"sider-custom\"\r\n            >\r\n                <div className=\"logo\" />\r\n                <SiderMenu\r\n                    menus={[...routes.menus, ...smenus.data]}\r\n                    onClick={this.menuClick}\r\n                    mode=\"inline\"\r\n                    selectedKeys={[selectedKey]}\r\n                    openKeys={firstHide ? [] : openKeys}\r\n                    onOpenChange={this.openMenu}\r\n                />\r\n                <style>\r\n                    {`\r\n                    #nprogress .spinner{\r\n                        left: ${collapsed ? '70px' : '206px'};\r\n                        right: 0 !important;\r\n                    }\r\n                    `}\r\n                </style>\r\n            </Sider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connectAlita([{ smenus: [] }])(withRouter(SiderCustom));\r\n"]},"metadata":{},"sourceType":"module"}