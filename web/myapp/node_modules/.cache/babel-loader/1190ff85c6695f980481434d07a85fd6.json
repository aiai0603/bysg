{"ast":null,"code":"import \"antd/lib/notification/style\";\nimport _notification from \"antd/lib/notification\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"C:\\\\Users\\\\asus\\\\Desktop\\\\zucc-bysg\\\\web\\\\myapp\\\\src\\\\components\\\\equipment\\\\UpdateForm.tsx\";\n\n/**\r\n * Created by hao.cheng on 2017/4/15.\r\n */\nimport React, { Component } from 'react';\nimport { get, post } from '../../service/tools';\nconst FormItem = _Form.Item;\nconst {\n  Option\n} = _Select;\n\nconst CollectionCreateForm = _Form.create()(props => {\n  const {\n    visible,\n    onCancel,\n    onCreate,\n    form,\n    data,\n    select,\n    handleSelect\n  } = props;\n  const {\n    getFieldDecorator\n  } = form;\n  let items = [];\n\n  for (let i = 0; i < select.length; i++) {\n    items.push( /*#__PURE__*/React.createElement(Option, {\n      key: select[i].id,\n      value: select[i].id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 18\n      }\n    }, select[i].conferenceName));\n  }\n\n  return /*#__PURE__*/React.createElement(_Modal, {\n    visible: visible,\n    title: \"\\u4FEE\\u6539\\u8BBE\\u5907\\u4FE1\\u606F\",\n    okText: \"\\u63D0\\u4EA4\",\n    cancelText: \"\\u53D6\\u6D88\",\n    onCancel: onCancel,\n    onOk: onCreate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Form, {\n    layout: \"vertical\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u8BBE\\u5907ID\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }, getFieldDecorator('equipmentId', {\n    rules: [{\n      required: true,\n      message: '请输入设备号!'\n    }],\n    initialValue: data ? data.equipmentId : ''\n  })( /*#__PURE__*/React.createElement(_Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 24\n    }\n  }))), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u8BBE\\u5907\\u7248\\u672C\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, getFieldDecorator('equipmentVersion', {\n    rules: [{\n      required: true,\n      message: '请输入版本号!'\n    }],\n    initialValue: data ? data.equipmentVersion : ''\n  })( /*#__PURE__*/React.createElement(_Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 24\n    }\n  }))), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u72B6\\u6001\",\n    className: \"collection-create-form_last-form-item\",\n    style: {\n      marginBottom: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, getFieldDecorator('state', {\n    initialValue: data ? String(data.state) : '0'\n  })( /*#__PURE__*/React.createElement(_Radio.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(_Radio, {\n    value: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 29\n    }\n  }, \"\\u6B63\\u5E38\"), /*#__PURE__*/React.createElement(_Radio, {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 29\n    }\n  }, \"\\u5C01\\u7981\")))), /*#__PURE__*/React.createElement(FormItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, getFieldDecorator('ConferenceRoom', {\n    rules: [{\n      required: true\n    }]\n  })( /*#__PURE__*/React.createElement(_Select, {\n    defaultValue: \"lucy\",\n    style: {\n      width: 120\n    },\n    onChange: handleSelect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, items, /*#__PURE__*/React.createElement(Option, {\n    value: \"jack\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 29\n    }\n  }, \"Jack\"))))));\n});\n\nclass UpdateForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false,\n      data: {\n        role: 1,\n        state: 0,\n        conferenceRoom: 0,\n        equipmentId: '',\n        equipmentVersion: ''\n      }\n    };\n    this.form = void 0;\n\n    this.handleSelect = key => {\n      this.state.data.conferenceRoom = parseInt(key);\n    };\n\n    this.showModal = () => {\n      get({\n        url: 'http://localhost:8080/equipment/find?id=' + this.props.adminId\n      }).then(res => {\n        if (!res) {\n          _notification.open({\n            message: '后台异常'\n          });\n\n          return 0;\n        }\n\n        if (res.rspCode !== '200') {\n          _notification.open({\n            message: res.rspMsg\n          });\n        } else {\n          this.setState({\n            data: res.data\n          });\n        }\n      });\n      get({\n        url: 'http://localhost:8080/conference/findall'\n      }).then(res => {\n        if (!res) {\n          _notification.open({\n            message: '后台异常'\n          });\n\n          return 0;\n        }\n\n        if (res.rspCode !== '200') {\n          _notification.open({\n            message: res.rspMsg\n          });\n        } else {\n          this.setState({\n            select: res.data\n          });\n        }\n      });\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleCreate = () => {\n      const form = this.form;\n      form.validateFields((err, values) => {\n        let mydata = this.state.data;\n        mydata.state = parseInt(values.state);\n        mydata.equipmentId = values.equipmentId;\n        mydata.equipmentVersion = values.equipmentVersion;\n\n        if (!err) {\n          post({\n            url: 'http://localhost:8080/equipment/create',\n            data: mydata\n          }).then(res => {\n            if (!res) {\n              _notification.open({\n                message: '后台异常'\n              });\n\n              return 0;\n            }\n\n            if (res.rspCode !== '200') {\n              _notification.open({\n                message: res.rspMsg\n              });\n            } else {\n              _notification.open({\n                message: res.rspMsg\n              });\n\n              form.resetFields();\n              this.setState({\n                visible: false\n              });\n              this.props.finished();\n            }\n          });\n        } else {\n          _notification.open({\n            message: '修改失败'\n          });\n\n          return 0;\n        }\n      });\n    };\n\n    this.saveFormRef = form => {\n      this.form = form;\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      onClick: this.showModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, \"\\u4FEE\\u6539\"), /*#__PURE__*/React.createElement(CollectionCreateForm, {\n      ref: this.saveFormRef,\n      visible: this.state.visible,\n      data: this.state.data,\n      handleSelect: this.handleSelect,\n      onCancel: this.handleCancel,\n      onCreate: this.handleCreate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default UpdateForm;","map":{"version":3,"sources":["C:/Users/asus/Desktop/zucc-bysg/web/myapp/src/components/equipment/UpdateForm.tsx"],"names":["React","Component","get","post","FormItem","Item","Option","CollectionCreateForm","create","props","visible","onCancel","onCreate","form","data","select","handleSelect","getFieldDecorator","items","i","length","push","id","conferenceName","rules","required","message","initialValue","equipmentId","equipmentVersion","marginBottom","String","state","width","UpdateForm","role","conferenceRoom","key","parseInt","showModal","url","adminId","then","res","open","rspCode","rspMsg","setState","handleCancel","handleCreate","validateFields","err","values","mydata","resetFields","finished","saveFormRef","render"],"mappings":"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","sourcesContent":["/**\r\n * Created by hao.cheng on 2017/4/15.\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Button, Modal, Form, Input, Radio, notification, Select, } from 'antd';\r\nimport { FormProps } from 'antd/lib/form';\r\nimport { get, post } from '../../service/tools';\r\nimport umbrella from 'umbrella-storage';\r\nconst FormItem = Form.Item;\r\nconst { Option } = Select;\r\n\r\ntype CollectionCreateFormProps = {\r\n    visible: boolean;\r\n    onCancel: () => void;\r\n    onCreate: () => void;\r\n    ref: any;\r\n    data: any;\r\n    select:any[];\r\n    handleSelect: () => any\r\n} & FormProps;\r\n\r\nconst CollectionCreateForm: any = Form.create()((props: CollectionCreateFormProps) => {\r\n    const { visible, onCancel, onCreate, form, data,select,handleSelect } = props;\r\n    const { getFieldDecorator } = form!;\r\n\r\n    let items = [];\r\n  for (let i = 0; i < select.length; i++) {\r\n     items.push( < Option key={select[i].id} value={select[i].id}>{select[i].conferenceName}</Option> );\r\n  }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            title=\"修改设备信息\"\r\n            okText=\"提交\"\r\n            cancelText=\"取消\"\r\n            onCancel={onCancel}\r\n            onOk={onCreate}\r\n        >\r\n            <Form layout=\"vertical\">\r\n                <FormItem label=\"设备ID\">\r\n                    {getFieldDecorator('equipmentId', {\r\n                        rules: [{ required: true, message: '请输入设备号!' }],\r\n                        initialValue: data ? data.equipmentId : '',\r\n                    })(<Input />)}\r\n                </FormItem>\r\n                <FormItem label=\"设备版本\">\r\n                    {getFieldDecorator('equipmentVersion', {\r\n                        rules: [{ required: true, message: '请输入版本号!' }],\r\n                        initialValue: data ? data.equipmentVersion : '',\r\n                    })(<Input />)}\r\n                </FormItem>\r\n                <FormItem\r\n                    label=\"状态\"\r\n                    className=\"collection-create-form_last-form-item\"\r\n                    style={{ marginBottom: 0 }}\r\n                >\r\n                    {getFieldDecorator('state', {\r\n                        initialValue: data ? String(data.state) : '0',\r\n                    })(\r\n                        <Radio.Group>\r\n                            <Radio value=\"0\">正常</Radio>\r\n                            <Radio value=\"1\">封禁</Radio>\r\n                        </Radio.Group>\r\n                    )}\r\n                </FormItem>\r\n                <FormItem>\r\n                    {getFieldDecorator('ConferenceRoom', {\r\n                        rules: [{ required: true }],\r\n                    })(\r\n                        <Select defaultValue=\"lucy\" style={{ width: 120 }} onChange={handleSelect}>\r\n                          { items}\r\n  \r\n                            <Option value=\"jack\">Jack</Option>\r\n                            \r\n                        </Select>\r\n                    )}\r\n                </FormItem>\r\n            </Form>\r\n        </Modal>\r\n    );\r\n});\r\n\r\nclass UpdateForm extends Component<any, any> {\r\n    // eslint-disable-next-line react/sort-comp\r\n    state = {\r\n        visible: false,\r\n        data: {\r\n            role: 1,\r\n            state: 0,\r\n            conferenceRoom:0,\r\n            equipmentId: '',\r\n            equipmentVersion: '',\r\n        },\r\n    };\r\n    form: any;\r\n\r\n    handleSelect = (key:any) => {\r\n        this.state.data.conferenceRoom = parseInt(key)\r\n    }\r\n    showModal = () => {\r\n        get({\r\n            url: 'http://localhost:8080/equipment/find?id=' + this.props.adminId,\r\n        }).then((res) => {\r\n            if (!res) {\r\n                notification.open({\r\n                    message: '后台异常',\r\n                });\r\n                return 0;\r\n            }\r\n            if (res.rspCode !== '200') {\r\n                notification.open({\r\n                    message: res.rspMsg,\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    data: res.data,\r\n                });\r\n            }\r\n        });\r\n\r\n        get({\r\n            url: 'http://localhost:8080/conference/findall',\r\n        }).then((res) => {\r\n            if (!res) {\r\n                notification.open({\r\n                    message: '后台异常',\r\n                });\r\n                return 0;\r\n            }\r\n            if (res.rspCode !== '200') {\r\n                notification.open({\r\n                    message: res.rspMsg,\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    select: res.data,\r\n                });\r\n            }\r\n        });\r\n\r\n\r\n\r\n        this.setState({ visible: true });\r\n    };\r\n\r\n    handleCancel = () => {\r\n        this.setState({ visible: false });\r\n    };\r\n\r\n    handleCreate = () => {\r\n        const form = this.form;\r\n        form.validateFields((err: any, values: any) => {\r\n            let mydata = this.state.data;\r\n            mydata.state = parseInt(values.state);\r\n            mydata.equipmentId = values.equipmentId;\r\n            mydata.equipmentVersion = values.equipmentVersion;\r\n\r\n            if (!err) {\r\n                post({\r\n                    url: 'http://localhost:8080/equipment/create',\r\n                    data: mydata,\r\n                }).then((res) => {\r\n                    if (!res) {\r\n                        notification.open({\r\n                            message: '后台异常',\r\n                        });\r\n                        return 0;\r\n                    }\r\n                    if (res.rspCode !== '200') {\r\n                        notification.open({\r\n                            message: res.rspMsg,\r\n                        });\r\n                    } else {\r\n                        notification.open({\r\n                            message: res.rspMsg,\r\n                        });\r\n                        form.resetFields();\r\n                        this.setState({ visible: false });\r\n                        this.props.finished();\r\n                    }\r\n                });\r\n            } else {\r\n                notification.open({\r\n                    message: '修改失败',\r\n                });\r\n                return 0;\r\n            }\r\n        });\r\n    };\r\n    saveFormRef = (form: any) => {\r\n        this.form = form;\r\n    };\r\n    render() {\r\n        return (\r\n            <div>\r\n                <a onClick={this.showModal}>修改</a>\r\n                <CollectionCreateForm\r\n                    ref={this.saveFormRef}\r\n                    visible={this.state.visible}\r\n                    data={this.state.data}\r\n                    handleSelect={this.handleSelect}\r\n                    onCancel={this.handleCancel}\r\n                    onCreate={this.handleCreate}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UpdateForm;\r\n"]},"metadata":{},"sourceType":"module"}