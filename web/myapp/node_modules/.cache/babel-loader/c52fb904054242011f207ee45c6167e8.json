{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/notification/style\";\nimport _notification from \"antd/lib/notification\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"C:\\\\Users\\\\asus\\\\Desktop\\\\zucc-bysg\\\\web\\\\myapp\\\\src\\\\components\\\\equipment\\\\ModalForm.tsx\";\n\n/**\r\n * Created by hao.cheng on 2017/4/15.\r\n */\nimport React, { Component } from 'react';\nimport { post } from '../../service/tools';\nconst FormItem = _Form.Item;\n\nconst CollectionCreateForm = _Form.create()(props => {\n  const {\n    visible,\n    onCancel,\n    onCreate,\n    form\n  } = props;\n  const {\n    getFieldDecorator\n  } = form;\n  return /*#__PURE__*/React.createElement(_Modal, {\n    visible: visible,\n    title: \"\\u65B0\\u5EFA\\u8BBE\\u5907\",\n    okText: \"\\u521B\\u5EFA\",\n    cancelText: \"\\u53D6\\u6D88\",\n    onCancel: onCancel,\n    onOk: onCreate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Form, {\n    layout: \"vertical\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u8BBE\\u5907ID\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 17\n    }\n  }, getFieldDecorator('equipmentId', {\n    rules: [{\n      required: true,\n      message: '请输入设备号!'\n    }]\n  })( /*#__PURE__*/React.createElement(_Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 24\n    }\n  }))), /*#__PURE__*/React.createElement(FormItem, {\n    label: \"\\u8BBE\\u5907\\u53F7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 17\n    }\n  }, getFieldDecorator('equipmentVersion', {\n    rules: [{\n      required: true,\n      message: '请输入版本号!'\n    }]\n  })( /*#__PURE__*/React.createElement(_Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 24\n    }\n  })))));\n});\n\nclass ModalForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false\n    };\n    this.form = void 0;\n\n    this.showModal = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleCreate = () => {\n      const form = this.form;\n      form.validateFields((err, values) => {\n        values.conferenceRoom = 0;\n        values.ip = \"暂无数据\";\n        values.picture = \"暂无数据\";\n        values.deleteFlag = 0;\n        values.state = 0;\n\n        if (!err) {\n          post({\n            url: 'http://localhost:8080/equipment/create',\n            data: values\n          }).then(res => {\n            if (!res) {\n              _notification.open({\n                message: '后台异常'\n              });\n\n              return 0;\n            }\n\n            if (res.rspCode !== '200') {\n              _notification.open({\n                message: res.rspMsg\n              });\n            } else {\n              _notification.open({\n                message: res.rspMsg\n              });\n\n              form.resetFields();\n              this.props.finished();\n              this.setState({\n                visible: false\n              });\n            }\n          });\n        } else {\n          _notification.open({\n            message: '修改失败'\n          });\n\n          return 0;\n        }\n      });\n    };\n\n    this.saveFormRef = form => {\n      this.form = form;\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.showModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, \"\\u6DFB\\u52A0\\u6570\\u636E\"), /*#__PURE__*/React.createElement(CollectionCreateForm, {\n      ref: this.saveFormRef,\n      visible: this.state.visible,\n      onCancel: this.handleCancel,\n      onCreate: this.handleCreate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default ModalForm;","map":{"version":3,"sources":["C:/Users/asus/Desktop/zucc-bysg/web/myapp/src/components/equipment/ModalForm.tsx"],"names":["React","Component","post","FormItem","Item","CollectionCreateForm","create","props","visible","onCancel","onCreate","form","getFieldDecorator","rules","required","message","ModalForm","state","showModal","setState","handleCancel","handleCreate","validateFields","err","values","conferenceRoom","ip","picture","deleteFlag","url","data","then","res","open","rspCode","rspMsg","resetFields","finished","saveFormRef","render"],"mappings":"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","sourcesContent":["/**\r\n * Created by hao.cheng on 2017/4/15.\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Button, Modal, Form, Input, Radio, notification } from 'antd';\r\nimport { FormProps } from 'antd/lib/form';\r\nimport { post } from '../../service/tools';\r\nconst FormItem = Form.Item;\r\n\r\ntype CollectionCreateFormProps = {\r\n    visible: boolean;\r\n    onCancel: () => void;\r\n    onCreate: () => void;\r\n    ref: any;\r\n} & FormProps;\r\n\r\nconst CollectionCreateForm: any = Form.create()((props: CollectionCreateFormProps) => {\r\n    const { visible, onCancel, onCreate, form } = props;\r\n    const { getFieldDecorator } = form!;\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            title=\"新建设备\"\r\n            okText=\"创建\"\r\n            cancelText=\"取消\"\r\n            onCancel={onCancel}\r\n            onOk={onCreate}\r\n        >\r\n            <Form layout=\"vertical\">\r\n                <FormItem label=\"设备ID\">\r\n                    {getFieldDecorator('equipmentId', {\r\n                        rules: [{ required: true, message: '请输入设备号!' }],\r\n                    })(<Input />)}\r\n                </FormItem>\r\n                <FormItem label=\"设备号\">\r\n                    {getFieldDecorator('equipmentVersion', {\r\n                        rules: [{ required: true, message: '请输入版本号!' }],\r\n                    })(<Input />)}\r\n                </FormItem>\r\n               \r\n            </Form>\r\n        </Modal>\r\n    );\r\n});\r\n\r\nclass ModalForm extends Component<any,any> {\r\n    state = {\r\n        visible: false,\r\n    };\r\n    form: any;\r\n    showModal = () => {\r\n        this.setState({ visible: true });\r\n    };\r\n    handleCancel = () => {\r\n        this.setState({ visible: false });\r\n    };\r\n    handleCreate = () => {\r\n        const form = this.form;\r\n        form.validateFields((err: any, values: any) => {\r\n            values.conferenceRoom = 0\r\n            values.ip = \"暂无数据\"\r\n            values.picture = \"暂无数据\"\r\n            values.deleteFlag = 0\r\n            values.state = 0\r\n            \r\n            if (!err) {\r\n                post({\r\n                    url: 'http://localhost:8080/equipment/create',\r\n                    data: values,\r\n                }).then((res) => {\r\n                    if (!res) {\r\n                        notification.open({\r\n                            message: '后台异常',\r\n                        });\r\n                        return 0;\r\n                    }\r\n                    if (res.rspCode !== '200') {\r\n                        notification.open({\r\n                            message: res.rspMsg,\r\n                        });\r\n                    } else {\r\n                        notification.open({\r\n                            message: res.rspMsg,\r\n                        });\r\n                        form.resetFields();\r\n                        this.props.finished();\r\n                        this.setState({ visible: false });\r\n                    }\r\n                });\r\n            } else {\r\n                notification.open({\r\n                    message: '修改失败',\r\n                });\r\n                return 0;\r\n            }\r\n           \r\n        });\r\n    };\r\n    saveFormRef = (form: any) => {\r\n        this.form = form;\r\n    };\r\n    render() {\r\n        return (\r\n            <div >\r\n                <Button type=\"primary\" onClick={this.showModal}>\r\n                    添加数据\r\n                </Button>\r\n                <CollectionCreateForm\r\n                    ref={this.saveFormRef}\r\n                    visible={this.state.visible}\r\n                    onCancel={this.handleCancel}\r\n                    onCreate={this.handleCreate}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ModalForm;\r\n"]},"metadata":{},"sourceType":"module"}